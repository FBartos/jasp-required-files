<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Compare MCMC estimates to &quot;true&quot; parameter values</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for MCMC-recover {bayesplot}"><tr><td>MCMC-recover {bayesplot}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Compare MCMC estimates to &quot;true&quot; parameter values</h2>

<h3>Description</h3>

<p>Plots comparing MCMC estimates to &quot;true&quot; parameter values. Before fitting a
model to real data it is useful to simulate data according to the model using
known (fixed) parameter values and to check that these &quot;true&quot; parameter
values are (approximately) recovered by fitting the model to the simulated
data. See the <strong>Plot Descriptions</strong> section, below, for details on the
available plots.
</p>


<h3>Usage</h3>

<pre>
mcmc_recover_intervals(
  x,
  true,
  batch = rep(1, length(true)),
  ...,
  facet_args = list(),
  prob = 0.5,
  prob_outer = 0.9,
  point_est = c("median", "mean", "none"),
  size = 4,
  alpha = 1
)

mcmc_recover_scatter(
  x,
  true,
  batch = rep(1, length(true)),
  ...,
  facet_args = list(),
  point_est = c("median", "mean"),
  size = 3,
  alpha = 1
)

mcmc_recover_hist(
  x,
  true,
  ...,
  facet_args = list(),
  binwidth = NULL,
  breaks = NULL
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>A 3-D array, matrix, list of matrices, or data frame of MCMC draws.
The <a href="MCMC-overview.html">MCMC-overview</a> page provides details on how to specify each these
allowed inputs. It is also possible to use an object with an
<code>as.array()</code> method that returns the same kind of 3-D array described on
the <a href="MCMC-overview.html">MCMC-overview</a> page.</p>
</td></tr>
<tr valign="top"><td><code>true</code></td>
<td>
<p>A numeric vector of &quot;true&quot; values of the parameters in <code>x</code>.
There should be one value in <code>true</code> for each parameter included in
<code>x</code> and the order of the parameters in <code>true</code> should be the same
as the order of the parameters in <code>x</code>.</p>
</td></tr>
<tr valign="top"><td><code>batch</code></td>
<td>
<p>Optionally, a vector-like object (numeric, character, integer,
factor) used to split the parameters into batches. If <code>batch</code> is
specified, it must have the same length as <code>true</code> and be in the same
order as <code>true</code>. Parameters in the same batch will be grouped together
in the same facet in the plot (see the <strong>Examples</strong> section, below).
The default is to group all parameters together into a single batch.
Changing the default is most useful when parameters are on very different
scales, in which case <code>batch</code> can be used to group them into batches
within which it makes sense to use the same y-axis.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Currently unused.</p>
</td></tr>
<tr valign="top"><td><code>facet_args</code></td>
<td>
<p>A named list of arguments (other than <code>facets</code>) passed
to <code><a href="../../ggplot2/html/facet_wrap.html">ggplot2::facet_wrap()</a></code> or <code><a href="../../ggplot2/html/facet_grid.html">ggplot2::facet_grid()</a></code>
to control faceting.</p>
</td></tr>
<tr valign="top"><td><code>prob</code></td>
<td>
<p>The probability mass to include in the inner interval. The
default is <code>0.5</code> (50% interval).</p>
</td></tr>
<tr valign="top"><td><code>prob_outer</code></td>
<td>
<p>The probability mass to include in the outer interval. The
default is <code>0.9</code> (90% interval).</p>
</td></tr>
<tr valign="top"><td><code>point_est</code></td>
<td>
<p>The point estimate to show. Either <code>"median"</code> (the
default), <code>"mean"</code>, or <code>"none"</code>.</p>
</td></tr>
<tr valign="top"><td><code>size, alpha</code></td>
<td>
<p>Passed to <code><a href="../../ggplot2/html/geom_point.html">ggplot2::geom_point()</a></code> to control the
appearance of plotted points.</p>
</td></tr>
<tr valign="top"><td><code>binwidth</code></td>
<td>
<p>Passed to <code><a href="../../ggplot2/html/geom_histogram.html">ggplot2::geom_histogram()</a></code> to override
the default binwidth.</p>
</td></tr>
<tr valign="top"><td><code>breaks</code></td>
<td>
<p>Passed to <code><a href="../../ggplot2/html/geom_histogram.html">ggplot2::geom_histogram()</a></code> as an
alternative to <code>binwidth</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object that can be further customized using the <strong>ggplot2</strong> package.
</p>


<h3>Plot Descriptions</h3>


<dl>
<dt><code>mcmc_recover_intervals()</code></dt><dd>
<p>Central intervals and point estimates computed from MCMC draws, with
&quot;true&quot; values plotted using a different shape.
</p>
</dd>
<dt><code>mcmc_recover_scatter()</code></dt><dd>
<p>Scatterplot of posterior means (or medians) against &quot;true&quot; values.
</p>
</dd>
<dt><code>mcmc_recover_hist()</code></dt><dd>
<p>Histograms of the draws for each parameter with the &quot;true&quot; value overlaid
as a vertical line.
</p>
</dd>
</dl>



<h3>See Also</h3>

<p>Other MCMC: 
<code><a href="MCMC-combos.html">MCMC-combos</a></code>,
<code><a href="MCMC-diagnostics.html">MCMC-diagnostics</a></code>,
<code><a href="MCMC-distributions.html">MCMC-distributions</a></code>,
<code><a href="MCMC-intervals.html">MCMC-intervals</a></code>,
<code><a href="MCMC-nuts.html">MCMC-nuts</a></code>,
<code><a href="MCMC-overview.html">MCMC-overview</a></code>,
<code><a href="MCMC-parcoord.html">MCMC-parcoord</a></code>,
<code><a href="MCMC-scatterplots.html">MCMC-scatterplots</a></code>,
<code><a href="MCMC-traces.html">MCMC-traces</a></code>
</p>


<h3>Examples</h3>

<pre>
## Not run: 
library(rstanarm)
alpha &lt;- 1; beta &lt;- rnorm(10, 0, 3); sigma &lt;- 2
X &lt;- matrix(rnorm(1000), 100, 10)
y &lt;- rnorm(100, mean = c(alpha + X %*% beta), sd = sigma)
fit &lt;- stan_glm(y ~ ., data = data.frame(y, X), refresh = 0)
draws &lt;- as.matrix(fit)
print(colnames(draws))
true &lt;- c(alpha, beta, sigma)

mcmc_recover_intervals(draws, true)

# put the coefficients on X into the same batch
mcmc_recover_intervals(draws, true, batch = c(1, rep(2, 10), 1))
# equivalent
mcmc_recover_intervals(draws, true, batch = grepl("X", colnames(draws)))
# same but facets stacked vertically
mcmc_recover_intervals(draws, true,
                       batch = grepl("X", colnames(draws)),
                       facet_args = list(ncol = 1),
                       size = 3)

# each parameter in its own facet
mcmc_recover_intervals(draws, true, batch = 1:ncol(draws))
# same but in a different order
mcmc_recover_intervals(draws, true, batch = c(1, 3, 4, 2, 5:12))
# present as bias by centering with true values
mcmc_recover_intervals(sweep(draws, 2, true), rep(0, ncol(draws))) + hline_0()


# scatterplot of posterior means vs true values
mcmc_recover_scatter(draws, true, point_est = "mean")


# histograms of parameter draws with true value added as vertical line
color_scheme_set("brightblue")
mcmc_recover_hist(draws[, 1:4], true[1:4])

## End(Not run)

</pre>

<hr /><div style="text-align: center;">[Package <em>bayesplot</em> version 1.7.2 <a href="00Index.html">Index</a>]</div>
</body></html>
